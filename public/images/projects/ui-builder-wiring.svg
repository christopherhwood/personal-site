<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 340" fill="none">
  <style>
    text { font-family: 'SF Mono', 'Fira Code', monospace; }
    .label { font-size: 10px; fill: #a09882; text-transform: uppercase; letter-spacing: 0.1em; }
    .body { font-size: 11px; fill: #a09882; }
    .accent { fill: #e3e0d4; opacity: 0.9; }
    .highlight { fill: #e3e0d4; font-weight: 600; }
    .box { fill: rgba(227,224,212,0.03); stroke: rgba(227,224,212,0.15); stroke-width: 1; rx: 4; }
    .box-hl { fill: rgba(227,224,212,0.06); stroke: rgba(227,224,212,0.25); stroke-width: 1.5; rx: 4; }
    .arrow { stroke: rgba(227,224,212,0.3); stroke-width: 1.5; fill: none; marker-end: url(#a); }
    .arrow2 { stroke: rgba(227,224,212,0.5); stroke-width: 1.5; fill: none; marker-end: url(#a2); }
    .line { stroke: rgba(227,224,212,0.2); stroke-width: 1; }
    .dash { stroke: rgba(227,224,212,0.12); stroke-width: 1; stroke-dasharray: 4 4; }
  </style>
  <defs>
    <marker id="a" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="rgba(227,224,212,0.3)" />
    </marker>
    <marker id="a2" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="rgba(227,224,212,0.5)" />
    </marker>
  </defs>

  <!-- Step 1: User's layout -->
  <rect class="box" x="20" y="25" width="140" height="90" />
  <text class="label" x="90" y="47" text-anchor="middle">1. Your Layout</text>
  <text class="accent" x="90" y="72" text-anchor="middle">[ - ]  0  [ + ]</text>
  <text class="body" x="90" y="92" text-anchor="middle">three components</text>

  <!-- Arrow -->
  <path class="arrow" d="M 160 70 L 195 70" />

  <!-- Step 2: AI reads tree -->
  <rect class="box-hl" x="205" y="15" width="160" height="110" />
  <text class="label" x="285" y="37" text-anchor="middle">2. AI Reads Tree</text>
  <text class="body" x="225" y="58">root (div)</text>
  <text class="body" x="240" y="76">├ button "-"</text>
  <text class="body" x="240" y="94">├ label "0"</text>
  <text class="body" x="240" y="112">└ button "+"</text>

  <!-- Arrow -->
  <path class="arrow" d="M 365 70 L 400 70" />

  <!-- Step 3: Infers + generates -->
  <rect class="box" x="410" y="15" width="175" height="110" />
  <text class="label" x="498" y="37" text-anchor="middle">3. Infers + Generates</text>
  <text class="body" x="430" y="58">CounterProvider {</text>
  <text class="body" x="440" y="76">count: 0,</text>
  <text class="body" x="440" y="94">increment: "...",</text>
  <text class="body" x="440" y="112">decrement: "..."</text>

  <!-- Arrow -->
  <path class="arrow2" d="M 585 70 L 620 70" />

  <!-- Step 4: eval -->
  <rect class="box" x="630" y="30" width="70" height="80" />
  <text class="label" x="665" y="55" text-anchor="middle">4. Eval</text>
  <text class="body" x="665" y="78" text-anchor="middle">new</text>
  <text class="body" x="665" y="94" text-anchor="middle">Function()</text>

  <!-- Divider -->
  <line class="dash" x1="285" y1="130" x2="285" y2="160" />

  <!-- Bottom: Placement -->
  <rect class="box-hl" x="100" y="165" width="520" height="160" />
  <text class="label" x="360" y="188" text-anchor="middle">Provider Placement</text>

  <!-- root node -->
  <rect class="box" x="330" y="200" width="60" height="26" />
  <text class="body" x="360" y="217" text-anchor="middle">root</text>

  <!-- Line down to provider -->
  <line class="line" x1="360" y1="226" x2="360" y2="245" />

  <!-- CounterProvider - highlighted -->
  <rect x="290" y="245" width="140" height="26" rx="4" fill="rgba(227,224,212,0.08)" stroke="rgba(227,224,212,0.4)" stroke-width="1.5" />
  <text class="accent" x="360" y="262" text-anchor="middle">CounterProvider</text>
  <text class="label" x="455" y="262" style="fill: rgba(227,224,212,0.5)">&#8592; inserted here</text>

  <!-- Lines to children -->
  <line class="line" x1="320" y1="271" x2="220" y2="295" />
  <line class="line" x1="360" y1="271" x2="360" y2="295" />
  <line class="line" x1="400" y1="271" x2="500" y2="295" />

  <!-- - button -->
  <rect class="box" x="190" y="295" width="60" height="24" />
  <text class="accent" x="220" y="311" text-anchor="middle" style="font-size: 10px">- btn</text>

  <!-- label -->
  <rect class="box" x="330" y="295" width="60" height="24" />
  <text class="accent" x="360" y="311" text-anchor="middle" style="font-size: 10px">label</text>

  <!-- + button -->
  <rect class="box" x="470" y="295" width="60" height="24" />
  <text class="accent" x="500" y="311" text-anchor="middle" style="font-size: 10px">+ btn</text>
</svg>
